<Page
    x:Class="LibreSpotUWP.Views.Win10_1507.HomePage_Win10_1507"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:LibreSpotUWP.Controls"
    xmlns:converters="using:LibreSpotUWP.Converters"
    xmlns:spotify="using:SpotifyAPI.Web"
    xmlns:viewmodels="using:LibreSpotUWP.ViewModels"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Page.Resources>
        <converters:TimeConverter x:Key="TimeConverter" />
        <converters:BoolToVisibility x:Key="BoolToVisibility" />
        <converters:InverseBoolToVisibility x:Key="InverseBoolToVisibility" />
        <converters:VolumeToPercentConverter x:Key="VolumeToPercentConverter" />
    </Page.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel Padding="16" Spacing="24">

                <StackPanel>
                    <TextBlock
                        FontSize="20"
                        FontWeight="SemiBold"
                        Text="Recently Played" />
                    <ListView
                        ItemsSource="{x:Bind ViewModel.RecentlyPlayed}"
                        ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                        ScrollViewer.HorizontalScrollMode="Enabled"
                        ScrollViewer.VerticalScrollMode="Disabled">
                        <ListView.ItemsPanel>
                            <ItemsPanelTemplate>
                                <ItemsStackPanel Orientation="Horizontal" />
                            </ItemsPanelTemplate>
                        </ListView.ItemsPanel>
                        <ListView.ItemTemplate>
                            <DataTemplate x:DataType="spotify:PlayHistoryItem">
                                <StackPanel Width="140" Margin="0,0,12,0">
                                    <Image
                                        Width="140"
                                        Height="140"
                                        Source="{x:Bind Track.Album.Images[0].Url}" />
                                    <TextBlock Text="{x:Bind Track.Name}" TextTrimming="CharacterEllipsis" />
                                    <TextBlock
                                        FontSize="12"
                                        Foreground="Gray"
                                        Text="{x:Bind Track.Artists[0].Name}" />
                                </StackPanel>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                </StackPanel>

                <StackPanel>
                    <TextBlock
                        FontSize="20"
                        FontWeight="SemiBold"
                        Text="Your Playlists" />
                    <ListView
                        ItemsSource="{x:Bind ViewModel.UserPlaylists}"
                        ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                        ScrollViewer.HorizontalScrollMode="Enabled"
                        ScrollViewer.VerticalScrollMode="Disabled">
                        <ListView.ItemsPanel>
                            <ItemsPanelTemplate>
                                <ItemsStackPanel Orientation="Horizontal" />
                            </ItemsPanelTemplate>
                        </ListView.ItemsPanel>
                        <ListView.ItemTemplate>
                            <DataTemplate x:DataType="spotify:FullPlaylist">
                                <StackPanel Width="140" Margin="0,0,12,0">
                                    <Image
                                        Width="140"
                                        Height="140"
                                        Source="{x:Bind Images[0].Url}" />
                                    <TextBlock Text="{x:Bind Name}" TextTrimming="CharacterEllipsis" />
                                </StackPanel>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                </StackPanel>

                <StackPanel>
                    <TextBlock
                        FontSize="20"
                        FontWeight="SemiBold"
                        Text="Top Artists" />
                    <ListView
                        ItemsSource="{x:Bind ViewModel.TopArtists}"
                        ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                        ScrollViewer.HorizontalScrollMode="Enabled"
                        ScrollViewer.VerticalScrollMode="Disabled">
                        <ListView.ItemsPanel>
                            <ItemsPanelTemplate>
                                <ItemsStackPanel Orientation="Horizontal" />
                            </ItemsPanelTemplate>
                        </ListView.ItemsPanel>
                        <ListView.ItemTemplate>
                            <DataTemplate x:DataType="spotify:FullArtist">
                                <StackPanel Width="140" Margin="0,0,12,0">
                                    <Ellipse Width="140" Height="140">
                                        <Ellipse.Fill>
                                            <ImageBrush ImageSource="{x:Bind Images[0].Url}" />
                                        </Ellipse.Fill>
                                    </Ellipse>
                                    <TextBlock Text="{x:Bind Name}" TextTrimming="CharacterEllipsis" />
                                </StackPanel>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                </StackPanel>

                <StackPanel>
                    <TextBlock
                        FontSize="20"
                        FontWeight="SemiBold"
                        Text="Top Tracks" />
                    <ListView
                        ItemsSource="{x:Bind ViewModel.TopTracks}"
                        ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                        ScrollViewer.HorizontalScrollMode="Enabled"
                        ScrollViewer.VerticalScrollMode="Disabled">
                        <ListView.ItemsPanel>
                            <ItemsPanelTemplate>
                                <ItemsStackPanel Orientation="Horizontal" />
                            </ItemsPanelTemplate>
                        </ListView.ItemsPanel>
                        <ListView.ItemTemplate>
                            <DataTemplate x:DataType="spotify:FullTrack">
                                <StackPanel Width="140" Margin="0,0,12,0">
                                    <Image
                                        Width="140"
                                        Height="140"
                                        Source="{x:Bind Album.Images[0].Url}" />
                                    <TextBlock Text="{x:Bind Name}" TextTrimming="CharacterEllipsis" />
                                    <TextBlock
                                        FontSize="12"
                                        Foreground="Gray"
                                        Text="{x:Bind Artists[0].Name}" />
                                </StackPanel>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                </StackPanel>
            </StackPanel>
        </ScrollViewer>

        <controls:NarrowMediaControllerBar Grid.Row="1" />
    </Grid>
</Page>